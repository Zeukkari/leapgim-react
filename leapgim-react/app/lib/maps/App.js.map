{"version":3,"sources":["App.coffee"],"names":[],"mappings":"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","file":"App.js","sourceRoot":"/source/","sourcesContent":["# robot = require 'robotjs'\n# zmq = require 'zmq'\n# YAML = require 'yamljs'\n# fs = require 'fs'\nrobot = nativeRequire 'robotjs'\nzmq = nativeRequire 'zmq'\nYAML = nativeRequire 'yamljs'\nfs = nativeRequire 'fs'\ndefaultProfile = 'etc/config.yml'\n\nwindow.loadProfile = (profile) ->\n\n    console.log \"Load profile #{profile}\"\n\n    # Close possible zmq socket\n    if(window.socket)\n        console.log \"Close socket\"\n        window.socket.close()\n\n    # Clear possible old instances\n    window.feedback = undefined\n    window.actionHero = undefined\n    window.translator = undefined\n\n    # Load config\n    config = YAML.parse fs.readFileSync profile, 'utf8'\n    window.config = config\n\n    console.log \"loaded config: \", config\n\n    socket = zmq.socket('sub')\n    socket.on 'connect', (fd, ep) ->\n        console.log 'connect, endpoint:', ep\n        socket.subscribe 'update'\n        socket.on 'message', (topic, message) ->\n            try\n                str_topic = topic.toString()\n                str_message = message.toString()\n\n                if(topic.toString() == 'update')\n                    model = JSON.parse str_message\n                    translator.parseGestures(model)\n            catch e\n                console.log \"error\", e\n            return\n        return\n    socket.on 'connect_delay', (fd, ep) ->\n        console.log 'connect_delay, endpoint:', ep\n        return\n    socket.on 'connect_retry', (fd, ep) ->\n        console.log 'connect_retry, endpoint:', ep\n        return\n    socket.on 'listen', (fd, ep) ->\n        console.log 'listen, endpoint:', ep\n        return\n    socket.on 'bind_error', (fd, ep) ->\n        console.log 'bind_error, endpoint:', ep\n        return\n    socket.on 'accept', (fd, ep) ->\n        console.log 'accept, endpoint:', ep\n        return\n    socket.on 'accept_error', (fd, ep) ->\n        console.log 'accept_error, endpoint:', ep\n        return\n    socket.on 'close', (fd, ep) ->\n        console.log 'close, endpoint:', ep\n        return\n    socket.on 'close_error', (fd, ep) ->\n        console.log 'close_error, endpoint:', ep\n        return\n    socket.on 'disconnect', (fd, ep) ->\n        console.log 'disconnect, endpoint:', ep\n        return\n    console.log 'Start monitoring...'\n    socket.monitor 500, 0\n\n    window.socket = socket\n    window.feedback = new window.FeedbackController\n    window.actionHero = new window.ActionController\n    window.translator = new window.GestureController\n\n    console.log \"Connect to \" + config.socket\n    slowConnect = ()->\n        window.socket.connect config.socket\n    setTimeout slowConnect, 1000\n\nwindow.loadProfile(defaultProfile)\n"]}